<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberSec Writeups | Personal Blog</title>
    <!-- Tailwind CSS for layout -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'hacker-green': '#76b900', // The signature green
                        'hacker-dark': '#0f0f0f',
                        'hacker-card': '#1a1a1a',
                        'hacker-text': '#e0e0e0',
                        'hacker-gray': '#888888'
                    },
                    fontFamily: {
                        sans: ['"Roboto"', 'sans-serif'],
                        mono: ['"Fira Code"', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f0f0f; 
        }
        ::-webkit-scrollbar-thumb {
            background: #333; 
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #76b900; 
        }

        body {
            background-color: #0f0f0f;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        .hover-underline-animation {
            display: inline-block;
            position: relative;
        }

        .hover-underline-animation::after {
            content: '';
            position: absolute;
            width: 100%;
            transform: scaleX(0);
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: #76b900;
            transform-origin: bottom right;
            transition: transform 0.25s ease-out;
        }

        .hover-underline-animation:hover::after {
            transform: scaleX(1);
            transform-origin: bottom left;
        }

        /* Card Hover Effects */
        .article-card:hover h2 {
            color: #76b900;
            transition: color 0.2s;
        }
        .article-card:hover img {
            opacity: 0.9;
            transition: opacity 0.2s;
        }

        /* Utility for hiding elements via JS */
        .hidden-post {
            display: none !important;
        }
        
        .nav-link {
            cursor: pointer;
        }

        /* Modal Animation */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-animate {
            animation: fadeIn 0.2s ease-out forwards;
        }
        
        /* Scanline effect for AI modal */
        .scanline {
            width: 100%;
            height: 100px;
            z-index: 10;
            background: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(118, 185, 0, 0.1) 50%, rgba(0,0,0,0) 100%);
            opacity: 0.1;
            background-size: 100% 4px;
            animation: scanline 10s linear infinite;
            pointer-events: none;
            position: absolute;
            top: 0;
            left: 0;
        }
        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navbar -->
    <nav class="bg-hacker-card border-b border-gray-800 sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <!-- Logo Area -->
                    <a href="#" onclick="filterCategory('all', document.getElementById('nav-home'))" class="flex-shrink-0 flex items-center gap-2">
                        <i class="fa-solid fa-shield-halved text-hacker-green text-3xl"></i>
                        <span class="font-bold text-xl tracking-tighter text-white">CYBER<span class="text-hacker-green">LOGS</span></span>
                    </a>
                    
                    <!-- Desktop Menu -->
                    <div class="hidden md:ml-10 md:flex md:space-x-8" id="nav-container">
                        <!-- Note: 'active-nav' class is used by JS to toggle styles -->
                        <a id="nav-home" onclick="filterCategory('all', this)" class="nav-link border-b-2 border-hacker-green text-white px-1 pt-1 text-sm font-medium transition-colors duration-200">Home</a>
                        <a id="nav-writeups" onclick="filterCategory('writeup', this)" class="nav-link border-b-2 border-transparent text-gray-300 hover:text-white hover:border-gray-300 px-1 pt-1 text-sm font-medium transition-colors duration-200">Writeups</a>
                        <a id="nav-projects" onclick="filterCategory('project', this)" class="nav-link border-b-2 border-transparent text-gray-300 hover:text-white hover:border-gray-300 px-1 pt-1 text-sm font-medium transition-colors duration-200">Projects</a>
                        <a id="nav-certs" onclick="filterCategory('certification', this)" class="nav-link border-b-2 border-transparent text-gray-300 hover:text-white hover:border-gray-300 px-1 pt-1 text-sm font-medium transition-colors duration-200">Certifications</a>
                    </div>
                </div>
                
                <!-- Search Bar -->
                <div class="flex items-center">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search logs..." class="bg-black border border-gray-700 text-sm rounded-sm focus:ring-hacker-green focus:border-hacker-green block w-48 pl-10 p-1.5 text-white placeholder-gray-500 transition-all focus:w-64">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa-solid fa-magnifying-glass text-gray-500 text-xs"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow w-full">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- LEFT COLUMN: Blog Posts (8 cols) -->
            <div class="lg:col-span-8">
                
                <!-- Section Header -->
                <div class="flex items-center gap-2 mb-6 border-b border-gray-800 pb-2">
                    <i id="section-icon" class="fa-solid fa-terminal text-hacker-green"></i>
                    <h2 id="section-title" class="text-lg font-bold uppercase tracking-widest text-white">Latest Intel</h2>
                </div>

                <!-- Posts Container -->
                <div id="posts-container" class="space-y-6">

                    <!-- NEW HERO / INTRO SECTION -->
                    <div class="article-card mb-8 p-8 bg-hacker-card border border-hacker-green rounded-sm shadow-[0_0_10px_rgba(118,185,0,0.1)] flex flex-col md:flex-row items-center gap-8" data-category="hero">
                        <div class="w-32 h-32 md:w-48 md:h-48 flex-shrink-0 rounded-full overflow-hidden border-4 border-hacker-green shadow-lg">
                             <img src="https://ui-avatars.com/api/?name=Alex+Doe&background=0D8ABC&color=fff&size=256" alt="Profile" class="w-full h-full object-cover">
                        </div>
                        <div class="text-center md:text-left">
                            <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Hello, I'm <span class="text-hacker-green">Alex Doe</span></h1>
                            <p class="text-xl text-gray-300 mb-4 font-mono border-b border-gray-800 pb-2 inline-block">Cyber Security Analyst | Red Teamer</p>
                            <p class="text-gray-400 mb-6 leading-relaxed text-sm">
                                Welcome to my digital archive. I am passionate about understanding systems by breaking them. 
                                Here you will find my detailed writeups on CTF challenges, deep dives into malware analysis, 
                                and the custom tools I build to automate my workflow.
                            </p>
                            <div class="flex flex-wrap justify-center md:justify-start gap-4">
                                <button onclick="location.href='mailto:contact@example.com'" class="px-6 py-2 bg-hacker-green text-black font-bold text-sm rounded-sm hover:bg-white transition uppercase tracking-wide">Contact Me</button>
                                <button onclick="window.open('https://github.com', '_blank')" class="px-6 py-2 border border-gray-600 text-white font-bold text-sm rounded-sm hover:border-hacker-green hover:text-hacker-green transition uppercase tracking-wide">Github</button>
                            </div>
                        </div>
                    </div>

                    <!-- Article 1 -->
                    <article class="article-card flex flex-col sm:flex-row bg-hacker-card border border-gray-800 rounded-sm overflow-hidden hover:border-gray-700 transition duration-300 shadow-md" data-category="writeup">
                        <!-- Thumbnail -->
                        <div class="sm:w-1/3 h-48 sm:h-auto relative overflow-hidden group">
                            <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Cyber Security" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-500">
                            <div class="absolute top-2 left-2 bg-hacker-green text-black text-xs font-bold px-2 py-1 rounded-sm uppercase">
                                CTF Writeup
                            </div>
                        </div>
                        <!-- Content -->
                        <div class="sm:w-2/3 p-5 flex flex-col justify-between">
                            <div>
                                <div class="flex items-center text-xs text-hacker-gray mb-2 gap-2">
                                    <i class="fa-regular fa-clock"></i> <span>Nov 28, 2023</span>
                                    <span>|</span>
                                    <i class="fa-solid fa-layer-group"></i> <span>HackTheBox</span>
                                </div>
                                <h2 class="text-xl font-bold text-white mb-2 leading-tight article-title">
                                    <a href="#" class="hover-underline-animation">Breaking Down the 'Eternal' Box: A Kernel Exploitation Journey</a>
                                </h2>
                                <p class="text-gray-400 text-sm line-clamp-2 article-desc">
                                    A detailed walkthrough of how I exploited the eternal blue vulnerability, pivoted through the network, and escalated privileges to root using a custom python script.
                                </p>
                            </div>
                            <div class="mt-4 flex items-center justify-between">
                                <a href="#" class="text-hacker-green text-sm font-semibold hover:text-white transition">Read Writeup <i class="fa-solid fa-arrow-right ml-1"></i></a>
                                <button onclick="analyzeArticle(this)" class="flex items-center gap-1 text-xs border border-gray-700 hover:border-hacker-green text-gray-300 hover:text-hacker-green px-2 py-1 rounded transition">
                                    <i class="fa-solid fa-wand-magic-sparkles"></i> Analyze
                                </button>
                            </div>
                        </div>
                    </article>

                    <!-- Article 2 -->
                    <article class="article-card flex flex-col sm:flex-row bg-hacker-card border border-gray-800 rounded-sm overflow-hidden hover:border-gray-700 transition duration-300 shadow-md" data-category="writeup">
                        <div class="sm:w-1/3 h-48 sm:h-auto relative overflow-hidden group">
                            <img src="https://images.unsplash.com/photo-1563206767-5b1d972eefab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Code Analysis" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-500">
                            <div class="absolute top-2 left-2 bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-sm uppercase">
                                Analysis
                            </div>
                        </div>
                        <div class="sm:w-2/3 p-5 flex flex-col justify-between">
                            <div>
                                <div class="flex items-center text-xs text-hacker-gray mb-2 gap-2">
                                    <i class="fa-regular fa-clock"></i> <span>Nov 15, 2023</span>
                                    <span>|</span>
                                    <i class="fa-solid fa-bug"></i> <span>Malware</span>
                                </div>
                                <h2 class="text-xl font-bold text-white mb-2 leading-tight article-title">
                                    <a href="#" class="hover-underline-animation">Reverse Engineering the New 'DarkStealer' Variant</a>
                                </h2>
                                <p class="text-gray-400 text-sm line-clamp-2 article-desc">
                                    De-obfuscating the latest sample of DarkStealer found in phishing campaigns targeting financial institutions. Here is the IoC list and behavior analysis.
                                </p>
                            </div>
                            <div class="mt-4 flex items-center justify-between">
                                <a href="#" class="text-hacker-green text-sm font-semibold hover:text-white transition">Read Analysis <i class="fa-solid fa-arrow-right ml-1"></i></a>
                                <button onclick="analyzeArticle(this)" class="flex items-center gap-1 text-xs border border-gray-700 hover:border-hacker-green text-gray-300 hover:text-hacker-green px-2 py-1 rounded transition">
                                    <i class="fa-solid fa-wand-magic-sparkles"></i> Analyze
                                </button>
                            </div>
                        </div>
                    </article>

                    <!-- Article 3 -->
                    <article class="article-card flex flex-col sm:flex-row bg-hacker-card border border-gray-800 rounded-sm overflow-hidden hover:border-gray-700 transition duration-300 shadow-md" data-category="certification">
                        <div class="sm:w-1/3 h-48 sm:h-auto relative overflow-hidden group">
                            <img src="https://images.unsplash.com/photo-1614064641938-3bbee52942c7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Certifications" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-500">
                            <div class="absolute top-2 left-2 bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded-sm uppercase">
                                Certification
                            </div>
                        </div>
                        <div class="sm:w-2/3 p-5 flex flex-col justify-between">
                            <div>
                                <div class="flex items-center text-xs text-hacker-gray mb-2 gap-2">
                                    <i class="fa-regular fa-clock"></i> <span>Oct 30, 2023</span>
                                    <span>|</span>
                                    <i class="fa-solid fa-certificate"></i> <span>OSCP</span>
                                </div>
                                <h2 class="text-xl font-bold text-white mb-2 leading-tight article-title">
                                    <a href="#" class="hover-underline-animation">My Journey to OSCP: Resources and Tips</a>
                                </h2>
                                <p class="text-gray-400 text-sm line-clamp-2 article-desc">
                                    I finally passed the OSCP exam on my first attempt. Here is a breakdown of the resources I used, my study schedule, and the methodology that helped me succeed.
                                </p>
                            </div>
                            <div class="mt-4 flex items-center justify-between">
                                <a href="#" class="text-hacker-green text-sm font-semibold hover:text-white transition">Read Story <i class="fa-solid fa-arrow-right ml-1"></i></a>
                                <button onclick="analyzeArticle(this)" class="flex items-center gap-1 text-xs border border-gray-700 hover:border-hacker-green text-gray-300 hover:text-hacker-green px-2 py-1 rounded transition">
                                    <i class="fa-solid fa-wand-magic-sparkles"></i> Analyze
                                </button>
                            </div>
                        </div>
                    </article>

                    <!-- Article 4 -->
                    <article class="article-card flex flex-col sm:flex-row bg-hacker-card border border-gray-800 rounded-sm overflow-hidden hover:border-gray-700 transition duration-300 shadow-md" data-category="project">
                        <div class="sm:w-1/3 h-48 sm:h-auto relative overflow-hidden group">
                            <img src="https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Project" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-500">
                            <div class="absolute top-2 left-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-sm uppercase">
                                Project
                            </div>
                        </div>
                        <div class="sm:w-2/3 p-5 flex flex-col justify-between">
                            <div>
                                <div class="flex items-center text-xs text-hacker-gray mb-2 gap-2">
                                    <i class="fa-regular fa-clock"></i> <span>Sep 12, 2023</span>
                                    <span>|</span>
                                    <i class="fa-brands fa-python"></i> <span>Python</span>
                                </div>
                                <h2 class="text-xl font-bold text-white mb-2 leading-tight article-title">
                                    <a href="#" class="hover-underline-animation">Building a Port Scanner in Python</a>
                                </h2>
                                <p class="text-gray-400 text-sm line-clamp-2 article-desc">
                                    A simple multi-threaded port scanner built from scratch using Python's socket library. Useful for understanding the TCP handshake process.
                                </p>
                            </div>
                            <div class="mt-4 flex items-center justify-between">
                                <a href="#" class="text-hacker-green text-sm font-semibold hover:text-white transition">View Code <i class="fa-brands fa-github ml-1"></i></a>
                                <button onclick="analyzeArticle(this)" class="flex items-center gap-1 text-xs border border-gray-700 hover:border-hacker-green text-gray-300 hover:text-hacker-green px-2 py-1 rounded transition">
                                    <i class="fa-solid fa-wand-magic-sparkles"></i> Analyze
                                </button>
                            </div>
                        </div>
                    </article>

                </div>
            </div>

            <!-- RIGHT COLUMN: Sidebar (4 cols) -->
            <div class="lg:col-span-4 space-y-8">
                
                <!-- About Card -->
                <div class="bg-hacker-card border border-gray-800 p-6 rounded-sm">
                    <div class="flex items-center gap-2 mb-4 border-b border-gray-800 pb-2">
                        <h3 class="font-bold text-white uppercase tracking-wider text-sm">About Author</h3>
                    </div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-24 h-24 rounded-full bg-gray-800 mb-4 overflow-hidden border-2 border-hacker-green p-1">
                            <img src="https://ui-avatars.com/api/?name=User+Name&background=0D8ABC&color=fff" alt="Profile" class="w-full h-full rounded-full object-cover">
                        </div>
                        <h4 class="text-xl font-bold text-white">Alex "Cipher" Doe</h4>
                        <p class="text-hacker-green text-sm mb-3">Penetration Tester | Bug Hunter</p>
                        <p class="text-gray-400 text-sm mb-4">
                            Documenting my journey through the world of cybersecurity. Focusing on web application security, CTFs, and malware analysis.
                        </p>
                        <div class="flex gap-4">
                            <a href="#" class="text-gray-400 hover:text-white"><i class="fa-brands fa-twitter text-xl"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white"><i class="fa-brands fa-github text-xl"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white"><i class="fa-brands fa-linkedin text-xl"></i></a>
                        </div>
                    </div>
                </div>

                <!-- NEW AI FEATURE: Daily Threat Briefing -->
                <div class="bg-hacker-card border border-gray-800 p-6 rounded-sm">
                    <div class="flex items-center gap-2 mb-4 border-b border-gray-800 pb-2">
                        <i class="fa-solid fa-robot text-hacker-green"></i>
                        <h3 class="font-bold text-white uppercase tracking-wider text-sm">AI Threat Brief</h3>
                    </div>
                    <p class="text-xs text-gray-400 mb-4">
                        Get a generated cyber security tip or threat intel briefing powered by Gemini.
                    </p>
                    <div id="tip-container" class="mb-4 hidden p-3 bg-black border-l-2 border-hacker-green text-xs text-gray-300 font-mono">
                        <!-- Tip goes here -->
                    </div>
                    <button onclick="generateTip()" id="tip-btn" class="w-full bg-transparent border border-hacker-green text-hacker-green hover:bg-hacker-green hover:text-black font-bold text-xs py-2 transition uppercase">
                        Generate Briefing <i class="fa-solid fa-bolt ml-1"></i>
                    </button>
                </div>

            </div>
        </div>
    </div>

    <!-- AI Analysis Modal -->
    <div id="analysisModal" class="fixed inset-0 bg-black bg-opacity-90 z-[60] hidden flex items-center justify-center p-4">
        <div class="bg-hacker-card border border-hacker-green w-full max-w-lg rounded-sm shadow-[0_0_20px_rgba(118,185,0,0.2)] relative overflow-hidden modal-animate">
            <div class="scanline"></div>
            
            <!-- Modal Header -->
            <div class="bg-black border-b border-gray-800 p-4 flex justify-between items-center relative z-20">
                <div class="flex items-center gap-2">
                    <i class="fa-solid fa-microchip text-hacker-green"></i>
                    <h3 class="font-bold text-white uppercase tracking-wider text-sm">Intel Analysis Report</h3>
                </div>
                <button onclick="closeModal()" class="text-gray-500 hover:text-white"><i class="fa-solid fa-xmark"></i></button>
            </div>

            <!-- Modal Body -->
            <div id="modalBody" class="p-6 relative z-20 max-h-[70vh] overflow-y-auto">
                <!-- Loading State -->
                <div id="modalLoader" class="text-center py-8">
                    <i class="fa-solid fa-circle-notch fa-spin text-hacker-green text-3xl mb-4"></i>
                    <p class="text-gray-400 text-sm font-mono animate-pulse">Establishing secure uplink to Gemini...</p>
                    <p class="text-gray-600 text-xs font-mono mt-2">Decrypting contents...</p>
                </div>

                <!-- Content State -->
                <div id="modalContent" class="hidden">
                    <!-- Dynamic content will be injected here -->
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="bg-black border-t border-gray-800 p-3 flex justify-end relative z-20">
                <span class="text-[10px] text-gray-600 font-mono mr-auto self-center">POWERED BY GEMINI 2.5 FLASH</span>
                <button onclick="closeModal()" class="px-4 py-1 text-xs border border-gray-600 text-gray-300 hover:text-white hover:border-white transition">CLOSE TERMINAL</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-black border-t border-gray-800 py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-500 text-sm">Â© 2023 CyberSec Logs. All rights reserved.</p>
            <div class="mt-4 flex justify-center space-x-6">
                <a href="#" class="text-gray-600 hover:text-hacker-green">Privacy Policy</a>
                <a href="#" class="text-gray-600 hover:text-hacker-green">Contact</a>
                <a href="#" class="text-gray-600 hover:text-hacker-green">RSS Feed</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        const apiKey = ""; // Set by environment
        
        // Category Filter Function (Existing)
        function filterCategory(category, navElement) {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('border-hacker-green', 'text-white');
                link.classList.add('border-transparent', 'text-gray-300', 'hover:text-white', 'hover:border-gray-300');
            });
            if(navElement) {
                navElement.classList.remove('border-transparent', 'text-gray-300', 'hover:text-white', 'hover:border-gray-300');
                navElement.classList.add('border-hacker-green', 'text-white');
            }
            const titleElement = document.getElementById('section-title');
            const iconElement = document.getElementById('section-icon');
            switch(category) {
                case 'all': titleElement.innerText = 'Latest Intel'; iconElement.className = 'fa-solid fa-terminal text-hacker-green'; break;
                case 'writeup': titleElement.innerText = 'CTF Writeups & Analysis'; iconElement.className = 'fa-solid fa-bug text-hacker-green'; break;
                case 'project': titleElement.innerText = 'My Projects'; iconElement.className = 'fa-solid fa-code text-hacker-green'; break;
                case 'certification': titleElement.innerText = 'Certifications & Reviews'; iconElement.className = 'fa-solid fa-certificate text-hacker-green'; break;
            }
            const posts = document.querySelectorAll('.article-card');
            posts.forEach(post => {
                const postCategory = post.getAttribute('data-category');
                if (category === 'all' || postCategory === category) {
                    post.style.display = 'flex';
                } else {
                    post.style.display = 'none';
                }
            });
            document.getElementById('searchInput').value = '';
        }

        document.getElementById('searchInput').addEventListener('keyup', function(e) {
            const searchText = e.target.value.toLowerCase();
            const posts = document.querySelectorAll('.article-card');
            posts.forEach(post => {
                const titleElement = post.querySelector('.article-title');
                const descElement = post.querySelector('.article-desc');
                if(titleElement && descElement) {
                     const title = titleElement.innerText.toLowerCase();
                     const description = descElement.innerText.toLowerCase();
                     if (title.includes(searchText) || description.includes(searchText)) {
                         post.style.display = 'flex';
                     } else {
                         post.style.display = 'none';
                     }
                }
            });
        });

        /* --- AI FEATURES --- */

        async function callGemini(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error("Gemini API Error:", error);
                return null;
            }
        }

        // Feature 1: Analyze Article
        async function analyzeArticle(btnElement) {
            const modal = document.getElementById('analysisModal');
            const modalContent = document.getElementById('modalContent');
            const modalLoader = document.getElementById('modalLoader');
            
            // Get content from the card
            const card = btnElement.closest('.article-card');
            const title = card.querySelector('.article-title').innerText;
            const desc = card.querySelector('.article-desc').innerText;
            const category = card.getAttribute('data-category');

            // Show Modal & Loader
            modal.classList.remove('hidden');
            modalLoader.classList.remove('hidden');
            modalContent.classList.add('hidden');

            const prompt = `You are a senior cybersecurity analyst. Analyze this writeup titled "${title}" with description "${desc}" (Category: ${category}).
            Output a short HTML snippet (no markdown, just tags) to be inserted into a div.
            Use Tailwind classes for styling. Text color should be gray-300 or white. Headers should be hacker-green text-hacker-green font-bold.
            Structure:
            <div class="space-y-4">
              <div><h3 class="text-hacker-green font-bold uppercase text-sm mb-1">Summary</h3><p class="text-sm text-gray-300">...</p></div>
              <div><h3 class="text-hacker-green font-bold uppercase text-sm mb-1">Key Concepts</h3><ul class="list-disc list-inside text-sm text-gray-300"><li>...</li></ul></div>
              <div><h3 class="text-hacker-green font-bold uppercase text-sm mb-1">Difficulty</h3><span class="... badge styles ...">...</span></div>
            </div>`;

            const result = await callGemini(prompt);

            if (result) {
                // Clean markdown code blocks if Gemini adds them
                const cleanHtml = result.replace(/```html/g, '').replace(/```/g, '');
                modalContent.innerHTML = cleanHtml;
                modalLoader.classList.add('hidden');
                modalContent.classList.remove('hidden');
            } else {
                modalContent.innerHTML = '<p class="text-red-500">Connection failed. Uplink terminated.</p>';
                modalLoader.classList.add('hidden');
                modalContent.classList.remove('hidden');
            }
        }

        function closeModal() {
            document.getElementById('analysisModal').classList.add('hidden');
        }

        // Feature 2: Generate Threat Brief
        async function generateTip() {
            const btn = document.getElementById('tip-btn');
            const container = document.getElementById('tip-container');
            
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> GENERATING...';
            btn.disabled = true;

            const prompt = "Act as a red team operator. Give me 1 short, advanced, and interesting cybersecurity tip, trick, or fact. Keep it under 200 characters. No markdown.";
            const result = await callGemini(prompt);

            if(result) {
                container.innerText = "> " + result;
                container.classList.remove('hidden');
                btn.innerHTML = 'Generate Briefing <i class="fa-solid fa-bolt ml-1"></i>';
                btn.disabled = false;
            } else {
                container.innerText = "Error retrieving intel.";
                container.classList.remove('hidden');
                btn.innerHTML = 'Retry';
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
